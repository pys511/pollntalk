/**
 * @auth   	: JEON JY
 * @date	: 20200705
 * 	공통 기능
 */

/*
 * 	화면 리플레시
 */

var sub;
var num;

function refleshPage()
{
	location.reload();
}
/*
 * 	팝업 종료
 */
function closePopup()
{
	var popupBox	= document.getElementById("popupBox");
	var element		= document.getElementById("popup_frame");
	if (element != null)
		popupBox.removeChild(element);
	
	var joinPopup	= document.getElementById("popup");
	popup.style.display	= "none"	
}
/*
 *	로그인 레이어 팝업
 */
function goLogin()
{	
	closePopup();
	
	var popup	= document.getElementById("popup");
	popup.style.display	= "block";
	
	var popupBox	= document.getElementById("popupBox");
	var element		= document.getElementById("popup_frame");
	if (element == null)
	{
		element					= document.createElement("iframe");
		element.id				= "popup_frame";
		element.style.cssFloat	= "left";
		element.style.width		= "100%";
		element.style.height	= "500px";
		element.style.border	= "0px";
		element.frameborder		= "0";
		element.src				= "/popup.php?mode=login";
		popupBox.appendChild(element);
	}
}
/*
 *	회원가입 레이어 팝업
 */
function goSignup()
{
	closePopup();
	
	var popup	= document.getElementById("popup");
	popup.style.display	= "block";
	
	var popupBox	= document.getElementById("popupBox");
	var element		= document.getElementById("popup_frame");
	if (element == null)
	{
		element					= document.createElement("iframe");
		element.id				= "popup_frame";
		element.style.cssFloat	= "left";
		element.style.width		= "100%";
		element.style.height	= "655px";
		element.style.border	= "0px";
		element.frameborder		= "0";
		element.src				= "/popup.php?mode=sign_up";
		popupBox.appendChild(element);
	}
}
/*
 *	회원정보수정 레이어 팝업
 */
function goModification()
{
	closePopup();
	
	var popup	= document.getElementById("popup");
	popup.style.display	= "block";
	
	var popupBox	= document.getElementById("popupBox");
	var element		= document.getElementById("popup_frame");
	if (element == null)
	{
		element					= document.createElement("iframe");
		element.id				= "popup_frame";
		element.style.cssFloat	= "left";
		element.style.width		= "100%";
		element.style.height	= "655px";
		element.style.border	= "0px";
		element.frameborder		= "0";
		element.src				= "/popup.php?mode=modification";
		popupBox.appendChild(element);
	}
}
/*
 *	대표사진업로드 레이어 팝업
 */
function goFileUp()
{
	closePopup();
	
	var popup	= document.getElementById("popup");
	popup.style.display	= "block";
	
	var popupBox	= document.getElementById("popupBox");
	var element		= document.getElementById("popup_frame");
	if (element == null)
	{
		element					= document.createElement("iframe");
		element.id				= "popup_frame";
		element.style.cssFloat	= "left";
		element.style.width		= "100%";
		element.style.height	= "300px";
		element.style.border	= "0px";
		element.frameborder		= "0";
		element.src				= "/popup.php?mode=file_up";
		popupBox.appendChild(element);
	}
}


/*
 *
 */
function numberWithCommas(x) 
{
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

/*
 * 	페이지 공통 기능 처리
 */
window.addEventListener("load", function()
{
	
	$(document).keydown(function(event) {
    if ( event.keyCode == 27 || event.which == 27 ) {
			closePopup();
    	}
	});
	
	//로그인
	var login			= document.getElementById("login");
	if (login != null)
	{
		login.addEventListener("click", function()
		{
			goLogin();
		});
	}
	
	//회원가입
	var join			= document.getElementById("join");
	if (join != null)
	{
		join.addEventListener("click", function()
		{
			goSignup();
		});
	}
	
	var mlogin			= document.getElementById("mlogin");
	if (mlogin != null)
	{
		mlogin.addEventListener("click", function(login)
		{
			login.click();
		}.bind(this, login));
	}
	
	//logout
	var loginout		= document.getElementById("loginout");
	if (loginout != null)
	{
		loginout.addEventListener("click", function()
		{
			var result = window.confirm("로그아웃 하시겠습니까?");
			if (result)
				location.href	= "/logout.php";
		});
	}
	
	//회원정보 수정
	var modification			= document.getElementById("modification");
	if (modification != null)
	{
		modification.addEventListener("click", function()
		{
			goModification();
		});
	}
	
	//대표사진업로드
	var fileUp			= document.getElementById("file_up");
	if (fileUp != null)
	{
		fileUp.addEventListener("click", function()
		{
			goFileUp();
		});
	}
	
	
	var mjoin			= document.getElementById("mjoin");
	if (mjoin != null)
	{
		mjoin.addEventListener("click", function()
		{
			join.click();
		}.bind(this, join));
	}
	
	//모바일
	//검색창 선택시
	var search			= document.getElementById("search");
	search.addEventListener("focus", function()
	{
		var nWidth		= window.screen.width;
		if (nWidth <= 800)
		{
			var msearchbox				= document.getElementById("mobilesearchbox");
			msearchbox.style.display	= "block";
		}	
	});
	
	var closesearch		= document.getElementById("closesearch");
	closesearch.addEventListener("click", function()
	{
		mobilesearchbox.style.display	= "none";
	});
	
	//모바일
	//메뉴 버튼
	var mmenubutton		= document.getElementById("mobilemenubutton");
	mmenubutton.addEventListener("click", function()
	{
		if (mobilemenubox.style.display == "none")
			mobilemenubox.style.display	= "block";
		else
			mobilemenubox.style.display	= "none";
	});
	
	var mmenuclose		= document.getElementById("mmenuclose");
	mmenuclose.addEventListener("click", function()
	{
		mobilemenubox.style.display	= "none";
	});
});